<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>she.store_dz</title>
  <style>
    :root{
      --pink:#ff4fa3;
      --pink2:#ff86c8;
      --bg:#fff2f8;
      --card:#ffffff;
      --text:#1f1f1f;
      --muted:#6b6b6b;
      --shadow: 0 10px 30px rgba(255,79,163,0.18);
      --border:#ffd1e7;
    }
    *{box-sizing:border-box;font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial;}
    body{
      margin:0;
      min-height:100vh;
      background:
        radial-gradient(1200px 600px at 20% 10%, #ffe1f0 0%, transparent 60%),
        radial-gradient(900px 500px at 90% 20%, #ffd0e8 0%, transparent 55%),
        linear-gradient(180deg, #fff7fb 0%, #fff2f8 100%);
      color:var(--text);
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding:18px;
    }
    .app{ width:min(780px, 100%); }

    .top{
      background: linear-gradient(90deg, var(--pink) 0%, var(--pink2) 100%);
      color:white;
      border-radius:18px;
      padding:18px 16px;
      box-shadow: var(--shadow);
      text-align:center;
    }
    .top h1{ margin:0; font-size:18px; font-weight:600; letter-spacing:.2px; }

    .card{
      margin-top:14px;
      background:var(--card);
      border-radius:18px;
      padding:16px;
      box-shadow: var(--shadow);
      border:1px solid #ffe0f0;
    }

    .sectionTitle{
      margin:0 0 10px 0;
      font-size:14px;
      font-weight:700;
      color:#333;
    }

    .grid{ display:grid; grid-template-columns: 1fr; gap:12px; }
    @media (min-width: 760px){
      .grid.two{ grid-template-columns: 1fr 1fr; }
    }

    .field label{
      display:block;
      font-size:13px;
      color:var(--muted);
      margin-bottom:6px;
    }
    .field input{
      width:100%;
      border:1px solid var(--border);
      border-radius:14px;
      padding:12px 12px;
      font-size:16px;
      outline:none;
      background:#fff;
    }
    .field input:focus{
      border-color: var(--pink);
      box-shadow: 0 0 0 4px rgba(255,79,163,0.12);
    }

    .result{
      margin-top:12px;
      padding:14px;
      border-radius:16px;
      background: #fff7fb;
      border: 1px dashed #ffb8dd;
    }
    .big{
      font-size:26px;
      font-weight:800;
      margin:0 0 6px 0;
    }
    .small{
      margin:0;
      font-size:13px;
      color:#444;
    }
    .tiny{
      margin-top:8px;
      font-size:12px;
      color:var(--muted);
    }

    /* Ø§Ù„ÙØ§ØªÙˆØ±Ø© (Ø´ÙƒÙ„ ØµÙˆØ±Ø©) */
    .invoiceWrap{
      margin-top:14px;
      border-radius:18px;
      overflow:hidden;
      border:1px solid #ffe0f0;
      background:#fff;
    }
    .invHeader{
      padding:14px 16px;
      background: linear-gradient(90deg, var(--pink) 0%, var(--pink2) 100%);
      color:#fff;
      text-align:center;
      font-weight:800;
      letter-spacing:.2px;
      font-size:15px;
    }
    .invBody{
      padding:14px 16px 16px;
    }
    .invRow{
      display:flex;
      justify-content:space-between;
      gap:10px;
      padding:8px 0;
      border-bottom:1px solid #f3f3f3;
      font-size:14px;
      align-items:center;
    }
    .invRow:last-child{ border-bottom:none; }
    .invRow .k{ color:#444; }
    .invRow .v{ font-weight:800; color:#111; }

    .thanksLine{
      margin-top:12px;
      text-align:center;
      font-weight:800;
      color:#333;
      padding:10px 12px 0;
    }
    .footer{
      text-align:center;
      margin-top:12px;
      color:#444;
      font-size:14px;
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    button{
      border:none;
      border-radius:14px;
      padding:12px 14px;
      font-size:15px;
      cursor:pointer;
      font-weight:800;
    }
    .btn-primary{
      background: linear-gradient(90deg, var(--pink) 0%, var(--pink2) 100%);
      color:white;
      box-shadow: var(--shadow);
      flex: 1 1 220px;
    }
    .btn-ghost{
      background:#fff;
      color:#333;
      border:1px solid var(--border);
      flex: 1 1 120px;
    }

    /* Ù‚Ø§Ù„Ø¨ Ù…Ø®ÙÙŠ Ù„Ù„ØµÙˆØ±Ø© (Ù„Ù„ØªÙ†Ø²ÙŠÙ„) */
    #shot{
      position: fixed;
      left:-99999px;
      top:-99999px;
      width: 820px;
      background:#fff;
      border-radius:18px;
      overflow:hidden;
      border:1px solid #ffe0f0;
    }
    #shot .h{
      padding:14px 16px;
      background: linear-gradient(90deg, var(--pink) 0%, var(--pink2) 100%);
      color:#fff;
      text-align:center;
      font-weight:800;
      font-size:15px;
    }
    #shot .b{ padding:14px 16px 16px; }
    #shot .r{
      display:flex;
      justify-content:space-between;
      gap:10px;
      padding:8px 0;
      border-bottom:1px solid #f3f3f3;
      font-size:14px;
    }
    #shot .r:last-child{ border-bottom:none; }
    #shot .k{ color:#444; }
    #shot .v{ font-weight:800; color:#111; }
    #shot .sum{
      margin-top:12px;
      padding:12px;
      border-radius:16px;
      background:#fff7fb;
      border:1px dashed #ffb8dd;
      text-align:center;
    }
    #shot .sum .a{ font-size:26px; font-weight:900; margin:0; }
    #shot .sum .b2{ font-size:13px; margin:6px 0 0 0; color:#444; }
    #shot .t{
      margin-top:12px;
      text-align:center;
      font-weight:900;
      color:#333;
    }
  </style>
</head>

<body>
  <div class="app">
    <div class="top">
      <h1>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ ÙÙŠ she.store_dz</h1>
    </div>

    <div class="card">
      <p class="sectionTitle">Ø­Ø§Ø³Ø¨Ø©</p>

      <div class="grid">
        <div class="field">
          <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</label>
          <input id="products" type="number" min="0" step="1" inputmode="numeric" />
        </div>

        <div class="field">
          <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹</label>
          <input id="pieces" type="number" min="0" step="1" inputmode="numeric" />
          <div class="tiny">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ù„Ù„ØªØ°ÙƒÙŠØ± ÙÙ‚Ø· (Ù…Ø§ ÙŠØ¯Ø®Ù„Ø´ ÙÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨)</div>
        </div>

        <div class="field">
          <label>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± ($)</label>
          <input id="usd" type="number" min="0" step="0.01" inputmode="decimal" />
        </div>
      </div>

      <div class="result" id="resultBox" style="display:none;">
        <p class="big" id="dzdOut">0 Ø¯Ø¬</p>
        <p class="small" id="alfOut">ÙŠØ¹Ù†ÙŠ: 0 Ø£Ù„Ù</p>
        <p class="tiny" id="piecesNote"></p>
      </div>

      <hr style="border:none;border-top:1px solid #ffe0f0;margin:16px 0;">

      <p class="sectionTitle">ÙØ§ØªÙˆØ±Ø© (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ ØªÙƒØªØ¨ÙŠ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª)</p>

      <div class="grid two">
        <div class="field">
          <label>Ø§Ø³Ù… ÙˆÙ„Ù‚Ø¨</label>
          <input id="fullName" type="text" required />
        </div>
        <div class="field">
          <label>Ø§Ù„Ø³ÙƒÙ†</label>
          <input id="address" type="text" required />
        </div>
      </div>

      <div class="invoiceWrap" id="invoiceWrap" style="display:none;">
        <div class="invHeader">ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨</div>
        <div class="invBody">
          <div class="invRow"><span class="k">Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨</span><span class="v" id="invName">-</span></div>
          <div class="invRow"><span class="k">Ø§Ù„Ø³ÙƒÙ†</span><span class="v" id="invAddr">-</span></div>
          <div class="invRow"><span class="k">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</span><span class="v" id="invProducts">0</span></div>
          <div class="invRow"><span class="k">Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±</span><span class="v" id="invUsd">$0.00</span></div>
          <div class="invRow"><span class="k">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</span><span class="v" id="invTotal">0 Ø¯Ø¬</span></div>

          <div class="thanksLine" id="thanksLine">Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ ğŸ’—</div>
        </div>
      </div>

      <div class="actions">
        <button class="btn-primary" id="downloadBtn" disabled>ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© (ØµÙˆØ±Ø©)</button>
        <button class="btn-ghost" id="resetBtn">Ù…Ø³Ø­</button>
      </div>

      <div class="footer">Ø´ÙƒØ±Ø§Ù‹ ÙŠØ§ Ø³ÙƒØ±Ø© Ù„Ø²ÙŠØ§Ø±ØªÙƒ ğŸ’—</div>
    </div>
  </div>

  <!-- Ù‚Ø§Ù„Ø¨ ØµÙˆØ±Ø© Ù„Ù„ØªÙ†Ø²ÙŠÙ„ -->
  <div id="shot" aria-hidden="true">
    <div class="h">ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ - she.store_dz</div>
    <div class="b">
      <div class="r"><span class="k">Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨</span><span class="v" id="sName">-</span></div>
      <div class="r"><span class="k">Ø§Ù„Ø³ÙƒÙ†</span><span class="v" id="sAddr">-</span></div>
      <div class="r"><span class="k">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</span><span class="v" id="sProducts">0</span></div>
      <div class="r"><span class="k">Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±</span><span class="v" id="sUsd">$0.00</span></div>

      <div class="sum">
        <p class="a" id="sTotal">0 Ø¯Ø¬</p>
        <p class="b2" id="sAlf">ÙŠØ¹Ù†ÙŠ: 0 Ø£Ù„Ù</p>
      </div>

      <div class="t" id="sThanks">Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ ğŸ’—</div>
    </div>
  </div>

<script>
  // Ø­Ø³Ø§Ø¨ Ø¯Ø§Ø®Ù„ÙŠ ÙÙ‚Ø· (Ø¨Ø¯ÙˆÙ† Ø¹Ø±Ø¶ Ø£ÙŠ ØªÙØ§ØµÙŠÙ„ ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©)
  const RATE = 270;      // Ø¯Ø¬ Ù„ÙƒÙ„ Ø¯ÙˆÙ„Ø§Ø±
  const PROFIT = 250;    // Ø±Ø¨Ø­ Ù„ÙƒÙ„ Ù…Ù†ØªØ¬
  const PACK = 50;       // ØªØºÙ„ÙŠÙ Ù…Ø±Ø© ÙˆØ­Ø¯Ø©

  const elProducts = document.getElementById('products');
  const elPieces   = document.getElementById('pieces');
  const elUsd      = document.getElementById('usd');

  const resultBox  = document.getElementById('resultBox');
  const dzdOut     = document.getElementById('dzdOut');
  const alfOut     = document.getElementById('alfOut');
  const piecesNote = document.getElementById('piecesNote');

  const fullName   = document.getElementById('fullName');
  const address    = document.getElementById('address');

  const invoiceWrap= document.getElementById('invoiceWrap');
  const invName    = document.getElementById('invName');
  const invAddr    = document.getElementById('invAddr');
  const invProducts= document.getElementById('invProducts');
  const invUsd     = document.getElementById('invUsd');
  const invTotal   = document.getElementById('invTotal');
  const thanksLine = document.getElementById('thanksLine');

  const downloadBtn= document.getElementById('downloadBtn');
  const resetBtn   = document.getElementById('resetBtn');

  // ØªÙ†Ø³ÙŠÙ‚ Ø¯Ø¬
  function fmtDZD(n){
    return Math.round(n).toLocaleString('fr-FR');
  }

  // 1000 Ø¯Ø¬ -> 100 Ø£Ù„Ù (Ø£ÙŠ dzd/10)
  function toAlf(dzd){
    const alf = dzd / 10;
    const isInt = Math.abs(alf - Math.round(alf)) < 1e-9;
    return isInt ? String(Math.round(alf)) : alf.toFixed(1);
  }

  function firstNameFromFull(full){
    const t = (full || "").trim();
    if(!t) return "";
    return t.split(/\s+/)[0];
  }

  // Ø¯Ù„Ø¹ Ø¨Ø³ÙŠØ· ÙˆÙ…ÙØ±Ù‘Ø­ (ØªÙ‚Ø¯Ø±ÙŠ ØªØ²ÙŠØ¯ÙŠ Ø£Ø³Ù…Ø§Ø¡ ÙƒÙŠÙ ØªØ­Ø¨ÙŠ)
  function nicknameFor(name){
    const n = firstNameFromFull(name);

    const map = {
      "Ø±Ø­Ø§Ø¨": ["Ø±Ø­ÙˆØ¨Ø©","Ø±Ø­ÙˆØ¨ØªÙŠ","Ø±Ø­Ø¨ÙˆØ­Ø©"],
      "Ù…Ø±ÙŠÙ…": ["Ù…Ø±ÙŠÙˆÙ…Ø©","Ù…ÙŠÙ…ÙŠ","Ù…Ø±Ù…ÙˆØ±Ø©"],
      "Ø³Ø§Ø±Ø©": ["Ø³ÙˆØ³Ùˆ","Ø³Ø§Ø±ØªÙŠ","Ø³Ø§Ø±Ùˆ"],
      "ÙØ§Ø·Ù…Ø©": ["ÙÙˆÙØ§","ÙØ·ÙˆÙ…Ø©","ÙÙˆÙØªÙŠ"],
      "Ø®Ø¯ÙŠØ¬Ø©": ["Ø¯ÙˆØ¯Ùˆ","Ø®Ø¯ÙŠØ¬ÙˆØ¬","Ø®Ø¯Ùˆ"],
      "Ø£Ø³Ù…Ø§Ø¡": ["Ø³Ù…Ø³Ù…","Ø³Ù…Ø³ÙˆÙ…Ø©","Ø³ÙˆØ³Ùˆ"],
      "Ø§Ø³Ù…Ø§Ø¡": ["Ø³Ù…Ø³Ù…","Ø³Ù…Ø³ÙˆÙ…Ø©","Ø³ÙˆØ³Ùˆ"],
      "Ø¥ÙŠÙ…Ø§Ù†": ["Ø¥ÙŠÙ…ÙˆÙ†Ø©","Ø¥ÙŠÙ…Ùˆ","Ù…ÙŠÙ…ÙˆÙ†Ø©"],
      "Ø§ÙŠÙ…Ø§Ù†": ["Ø¥ÙŠÙ…ÙˆÙ†Ø©","Ø¥ÙŠÙ…Ùˆ","Ù…ÙŠÙ…ÙˆÙ†Ø©"],
      "Ù„ÙŠÙ„Ù‰": ["Ù„ÙˆÙ„Ùˆ","Ù„ÙˆÙ„ÙŠØªØ§","Ù„ÙŠÙ„Ùˆ"],
      "Ø±ÙŠÙ…": ["Ø±ÙŠÙˆÙ…Ø©","Ø±ÙŠÙ…Ùˆ","Ø±ÙˆØ±Ùˆ"],
      "ÙŠØ§Ø³Ù…ÙŠÙ†": ["ÙŠØ§Ø³Ùˆ","ÙŠØ§Ø³Ù…ÙŠÙ†Ø©","Ø³ÙˆØ³Ùˆ"],
      "Ø³Ù†Ø¯Ø³": ["Ø³Ù†Ø¯ÙˆØ³Ø©","Ø³ÙˆØ³Ùˆ","Ø¯ÙˆØ¯Ùˆ"],
      "Ù†Ø³Ø±ÙŠÙ†": ["Ù†ÙˆÙ†Ùˆ","Ù†Ø³Ø±ÙˆÙ†Ø©","Ø³ÙˆØ³Ùˆ"],
      "Ø³Ù„Ù…Ù‰": ["Ø³Ù„ÙˆÙ…ÙŠ","Ø³ÙˆØ³Ùˆ","Ù„Ù…Ù‘ÙˆÙ„Ø©"],
      "Ø¢ÙŠØ©": ["ÙŠÙˆÙŠÙˆ","Ø¢ÙŠÙˆ","Ø¢ÙŠØ§ØªÙˆ"],
      "Ø§ÙŠØ©": ["ÙŠÙˆÙŠÙˆ","Ø¢ÙŠÙˆ","Ø¢ÙŠØ§ØªÙˆ"]
    };

    if(map[n]) return map[n][0];

    // fallback Ù„Ø·ÙŠÙ
    if(!n) return "";
    if(n.length <= 3) return n + "Ùˆ";
    return n + "ÙˆÙ†Ø©";
  }

  function calcTotal(){
    const products = Math.max(0, Number(elProducts.value || 0));
    const usd = Math.max(0, Number(elUsd.value || 0));
    const hasSomething = (products > 0) || (usd > 0);

    if(!hasSomething){
      resultBox.style.display = "none";
      return { products, usd, total: 0, hasSomething: false };
    }

    const convert = usd * RATE;
    const profit  = products * PROFIT;
    const pack    = PACK; // Ù…Ø±Ø© ÙˆØ­Ø¯Ø© ÙƒÙŠ ÙŠÙƒÙˆÙ† ÙƒØ§ÙŠÙ† Ø·Ù„Ø¨

    const total = convert + profit + pack;

    resultBox.style.display = "block";
    dzdOut.textContent = `${fmtDZD(total)} Ø¯Ø¬`;
    alfOut.textContent = `ÙŠØ¹Ù†ÙŠ: ${toAlf(total)} Ø£Ù„Ù`;

    const pieces = Math.max(0, Number(elPieces.value || 0));
    piecesNote.textContent = pieces > 0 ? `ØªØ°ÙƒÙŠØ±: Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ = ${pieces}` : "";

    return { products, usd, total, hasSomething: true };
  }

  function updateInvoice(){
    const { products, usd, total, hasSomething } = calcTotal();

    const name = (fullName.value || "").trim();
    const addr = (address.value || "").trim();

    // Ø§Ù„ÙØ§ØªÙˆØ±Ø© ØªØ¨Ø§Ù† ØºÙŠØ± Ø¥Ø°Ø§: ÙƒØ§ÙŠÙ† Ø­Ø³Ø§Ø¨ + Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠÙ‘Ø© Ù…Ø¹Ù…Ù‘Ø±Ø©
    const canShow = hasSomething && name && addr;

    invoiceWrap.style.display = canShow ? "block" : "none";
    downloadBtn.disabled = !canShow;

    if(!canShow) return;

    invName.textContent = name;
    invAddr.textContent = addr;
    invProducts.textContent = String(products);
    invUsd.textContent = `$${usd.toFixed(2)}`;
    invTotal.textContent = `${fmtDZD(total)} Ø¯Ø¬`;

    const nick = nicknameFor(name);
    thanksLine.textContent = nick ? `Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ ${nick} ğŸ’—` : `Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ ğŸ’—`;
  }

  function downloadPNG(){
    const { products, usd, total, hasSomething } = calcTotal();
    const name = (fullName.value || "").trim();
    const addr = (address.value || "").trim();

    if(!(hasSomething && name && addr)){
      alert("Ù„Ø§Ø²Ù… ØªØ¹Ù…Ù‘Ø±ÙŠ: Ø§Ø³Ù… ÙˆÙ„Ù‚Ø¨ + Ø§Ù„Ø³ÙƒÙ† (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ) ğŸ˜Š");
      return;
    }

    // Ø¹Ø¨Ù‘ÙŠ Ù‚Ø§Ù„Ø¨ Ø§Ù„ØµÙˆØ±Ø©
    document.getElementById('sName').textContent = name;
    document.getElementById('sAddr').textContent = addr;
    document.getElementById('sProducts').textContent = String(products);
    document.getElementById('sUsd').textContent = `$${usd.toFixed(2)}`;
    document.getElementById('sTotal').textContent = `${fmtDZD(total)} Ø¯Ø¬`;
    document.getElementById('sAlf').textContent = `ÙŠØ¹Ù†ÙŠ: ${toAlf(total)} Ø£Ù„Ù`;

    const nick = nicknameFor(name);
    document.getElementById('sThanks').textContent = nick ? `Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ ${nick} ğŸ’—` : `Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ ğŸ’—`;

    const node = document.getElementById('shot');
    const width = node.offsetWidth;
    const height = node.offsetHeight;

    const cloned = node.cloneNode(true);
    cloned.style.position = "static";
    cloned.style.left = "0";
    cloned.style.top = "0";

    const serializer = new XMLSerializer();
    const html = serializer.serializeToString(cloned);

    const svg = `
      <svg xmlns="http://www.w3.org/2000/svg" width="${width}" height="${height}">
        <foreignObject width="100%" height="100%">
          <div xmlns="http://www.w3.org/1999/xhtml">${html}</div>
        </foreignObject>
      </svg>
    `;

    const svgBlob = new Blob([svg], {type:"image/svg+xml;charset=utf-8"});
    const url = URL.createObjectURL(svgBlob);

    const img = new Image();
    img.onload = () => {
      const scale = 2;
      const canvas = document.createElement('canvas');
      canvas.width = width * scale;
      canvas.height = height * scale;
      const ctx = canvas.getContext('2d');
      ctx.scale(scale, scale);
      ctx.drawImage(img, 0, 0);

      URL.revokeObjectURL(url);

      canvas.toBlob((blob) => {
        const pngUrl = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = pngUrl;
        a.download = "ÙØ§ØªÙˆØ±Ø©_she_store_dz.png";
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(pngUrl);
      }, "image/png");
    };

    img.onerror = () => {
      URL.revokeObjectURL(url);
      alert("Ø§Ù„ØªÙ†Ø²ÙŠÙ„ Ù…Ø§ Ø®Ø¯Ù…Ø´ Ù‡Ù†Ø§. Ø¬Ø±Ø¨ÙŠ ØªÙØªØ­ÙŠ Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨ Google Chrome.");
    };

    img.src = url;
  }

  function resetAll(){
    elProducts.value = "";
    elPieces.value = "";
    elUsd.value = "";
    fullName.value = "";
    address.value = "";
    calcTotal();
    updateInvoice();
  }

  // Ø£Ø­Ø¯Ø§Ø«
  [elProducts, elPieces, elUsd].forEach(el => el.addEventListener('input', updateInvoice));
  [fullName, address].forEach(el => el.addEventListener('input', updateInvoice));

  downloadBtn.addEventListener('click', downloadPNG);
  resetBtn.addEventListener('click', resetAll);

  // Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©: ÙƒÙ„Ø´ ÙØ§Ø±Øº
  resetAll();
</script>
</body>
                                                                      </html>
