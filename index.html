<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>she.store_dz</title>

<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;font-family:'Tajawal',sans-serif}
body{
  margin:0;
  background:#fff0f6;
  display:flex;
  justify-content:center;
}
.container{
  width:100%;
  max-width:430px;
  padding:12px;
}
.header{
  background:#e91e63;
  color:#fff;
  text-align:center;
  padding:14px;
  border-radius:18px;
  font-weight:900;
  font-size:18px;
}
.card{
  background:#fff;
  margin-top:10px;
  border-radius:18px;
  padding:12px;
  box-shadow:0 6px 18px rgba(0,0,0,.1);
}
label{
  font-size:13px;
  font-weight:700;
  color:#555;
}
input{
  width:100%;
  padding:10px;
  margin-top:5px;
  margin-bottom:8px;
  border-radius:12px;
  border:1px solid #f3b5cc;
  font-size:15px;
}
.row{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:8px;
}
.resultBox{
  background:#d81b60;
  color:#fff;
  border-radius:16px;
  padding:10px;
  text-align:center;
}
.resultBox .price{
  font-size:22px;
  font-weight:900;
}
.resultBox .meaning{
  font-size:18px;
  font-weight:900;
}
.thanksTop{
  text-align:center;
  margin-top:6px;
  font-weight:700;
  color:#c2185b;
}
.invoiceTitle{
  background:#ffd1e4;
  text-align:center;
  padding:8px;
  font-weight:900;
  border-radius:14px 14px 0 0;
}
.invoiceBody{
  padding:10px;
}
.invRow{
  display:flex;
  justify-content:space-between;
  font-size:14px;
  padding:6px 0;
  border-bottom:1px solid #eee;
}
.invRow:last-child{border:none}
.finalThanks{
  text-align:center;
  margin-top:8px;
  font-weight:900;
  color:#c2185b;
}
.note{
  text-align:center;
  font-size:13px;
  margin-top:6px;
  color:#7a2450;
}
.buttons{
  display:flex;
  gap:8px;
  margin-top:10px;
}
button{
  flex:1;
  padding:10px;
  border-radius:14px;
  border:none;
  font-weight:900;
  cursor:pointer;
}
.download{background:#e91e63;color:#fff}
.clear{background:#fff;border:1px solid #e91e63;color:#e91e63}
</style>
</head>

<body>
<div class="container">

<div class="header">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ ÙÙŠ she.store_dz</div>

<div class="card">
  <div class="row">
    <div>
      <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬</label>
      <input id="products" value="1">
    </div>
    <div>
      <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹</label>
      <input id="pieces" value="1">
    </div>
  </div>

  <label>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± ($)</label>
  <input id="usd">

  <div class="resultBox">
    <div class="price" id="dzd">0 Ø¯Ø¬</div>
    <div class="meaning" id="meaning">ÙŠØ¹Ù†ÙŠ: 0</div>
  </div>

  <div class="thanksTop">Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ ÙŠØ§ Ø³ÙƒØ±Ø© Ù„Ø²ÙŠØ§Ø±ØªÙƒ ğŸ’—</div>
</div>

<div class="card" id="invoice">
  <div class="invoiceTitle">ÙØ§ØªÙˆØ±ØªÙƒ</div>

  <div class="invoiceBody" id="invoiceShot">
    <label>Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨ (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ)</label>
    <input id="name">

    <label>Ø§Ù„Ø³ÙƒÙ†</label>
    <input id="address">

    <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
    <input id="phone">

    <div class="invRow"><span>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</span><span id="invProducts">1</span></div>
    <div class="invRow"><span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</span><span id="invTotal">0 Ø¯Ø¬</span></div>

    <div class="finalThanks" id="nickThanks">Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ ğŸ’—</div>
    <div class="note">
      Ø¹Ù†Ø¯ Ù…ÙˆØ§ÙÙ‚ØªÙƒ Ù„Ù„Ø´Ø±Ø§Ø¡ Ø§Ø±Ø³Ù„ÙŠ Ø±Ø§Ø¨Ø· Ø³Ù„Ø© Ù…Ø¹ ØµÙˆØ±Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙÙŠ Ø§Ù„Ø®Ø§Øµ âœ…ğŸ“±
    </div>
  </div>

  <div class="buttons">
    <button class="download" onclick="downloadInvoice()">ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</button>
    <button class="clear" onclick="resetAll()">Ù…Ø³Ø­</button>
  </div>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
const USD_RATE = 270;
const PROFIT = 250;
const PACK = 50;

const nicknames = {
"Ø±Ø­Ø§Ø¨":"Ø±Ø­ÙˆØ¨Ø©","ÙØ±Ø­":"ÙØ±ÙØ±","Ø³Ù†Ø¯Ø³":"Ø³ÙˆØ³Ùˆ","Ø§Ù…Ø§Ù„":"Ø§Ù…ÙˆÙ„Ø©","Ù‡Ù†Ø§Ø¯ÙŠ":"Ù‡Ù†ÙˆØ¯Ø©",
"Ø§ÙŠØ©":"Ø§ÙŠÙˆØªØ©","Ø¢ÙŠØ©":"Ø§ÙŠÙˆØªØ©","Ù…Ø±ÙŠÙ…":"Ù…Ø±ÙŠÙˆÙ…Ø©","Ù…Ø±Ø§Ù…":"Ù…Ø±ÙˆØ´","ÙˆØµØ§Ù„":"ÙˆØµÙˆÙ„",
"Ø§ÙŠÙ†Ø§Ø³":"Ø§Ù†ÙˆØ³Ø©","Ø¥ÙŠÙ†Ø§Ø³":"Ø§Ù†ÙˆØ³Ø©"
};

function nickname(name){
  if(nicknames[name]) return nicknames[name];
  return name.slice(0,2)+"ÙˆØ´";
}

function meaningText(dzd){
  let cents = dzd * 100;
  let million = Math.floor(cents / 1000000);
  let rest = cents % 1000000;

  let txt = million === 1 ? "Ù…Ù„ÙŠÙˆÙ†" :
            million === 2 ? "Ø²ÙˆØ¬ Ù…Ù„Ø§ÙŠÙ†" :
            million > 2 ? million + " Ù…Ù„Ø§ÙŠÙ†" : "";

  if(rest > 0){
    let thousands = Math.floor(rest / 1000);
    if(thousands > 0){
      txt += (txt ? " Ùˆ" : "") + thousands + " Ø£Ù„Ù";
    }
  }
  return "ÙŠØ¹Ù†ÙŠ: " + txt;
}

function calculate(){
  let p = Math.max(1, parseInt(products.value||1));
  let usd = parseFloat(usdInput.value||0);
  let total = Math.round(usd*USD_RATE + p*PROFIT + PACK);

  dzd.textContent = total + " Ø¯Ø¬";
  meaning.textContent = meaningText(total);

  invProducts.textContent = p;
  invTotal.textContent = total + " Ø¯Ø¬";

  let n = nameInput.value.trim();
  nickThanks.textContent = n ? "Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ "+nickname(n)+" ğŸ’—" : "Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ ğŸ’—";
}

function resetAll(){
  products.value=1;
  pieces.value=1;
  usdInput.value="";
  nameInput.value="";
  address.value="";
  phone.value="";
  calculate();
}

function downloadInvoice(){
  if(!nameInput.value||!address.value||!phone.value){
    alert("Ø±Ø¬Ø§Ø¡Ù‹ Ø¹Ù…Ù‘Ø±ÙŠ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙƒØ§Ù…Ù„Ø©");
    return;
  }
  html2canvas(invoiceShot,{scale:2}).then(c=>{
    let a=document.createElement("a");
    a.href=c.toDataURL("image/png");
    a.download="ÙØ§ØªÙˆØ±Ø©_she.store_dz.png";
    a.click();
  });
}

const products=document.getElementById("products");
const pieces=document.getElementById("pieces");
const usdInput=document.getElementById("usd");
const dzd=document.getElementById("dzd");
const meaning=document.getElementById("meaning");
const nameInput=document.getElementById("name");
const address=document.getElementById("address");
const phone=document.getElementById("phone");
const invProducts=document.getElementById("invProducts");
const invTotal=document.getElementById("invTotal");
const nickThanks=document.getElementById("nickThanks");
const invoiceShot=document.getElementById("invoiceShot");

["input","change"].forEach(e=>{
  products.addEventListener(e,calculate);
  usdInput.addEventListener(e,calculate);
  nameInput.addEventListener(e,calculate);
});

calculate();
</script>

</body>
</html>
