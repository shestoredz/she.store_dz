<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>she.store_dz</title>

  <!-- html2canvas (Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙƒØµÙˆØ±Ø©) -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <style>
    :root{
      --pink:#ff5aa5;
      --pink2:#ff7bb7;
      --deep:#c2185b;
      --bg:#fff7fb;
      --card:#ffffff;
      --line:#f4b3cf;
      --text:#333;
      --muted:#777;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial, sans-serif;
      background: linear-gradient(180deg, #ffe6f1 0%, #fff 40%, #fff7fb 100%);
      color:var(--text);
    }

    .wrap{
      max-width: 430px;
      margin: 0 auto;
      padding: 14px 12px 18px;
    }

    .hero{
      background: linear-gradient(90deg, var(--pink) 0%, var(--pink2) 100%);
      color:#fff;
      text-align:center;
      padding: 14px 12px;
      border-radius: 22px;
      font-weight: 700;
      font-size: 20px;
      letter-spacing:.2px;
      box-shadow: 0 10px 25px rgba(255,90,165,.18);
      margin-bottom: 12px;
    }

    .card{
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(244,179,207,.6);
      border-radius: 18px;
      padding: 12px;
      box-shadow: 0 10px 25px rgba(194,24,91,.06);
      backdrop-filter: blur(4px);
    }

    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 10px;
    }

    label{
      display:block;
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 6px;
      font-weight: 600;
    }

    input{
      width:100%;
      padding: 11px 12px;
      border-radius: 14px;
      border: 2px solid rgba(244,179,207,.75);
      outline: none;
      font-size: 16px;
      background:#fff;
    }
    input:focus{
      border-color: rgba(255,90,165,.8);
      box-shadow: 0 0 0 3px rgba(255,90,165,.12);
    }

    .one{
      margin-bottom: 10px;
    }

    /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¯Ø¬ (ÙˆØ±Ø¯ÙŠ ØºØ§Ù…Ù‚) */
    .priceBox{
      background: linear-gradient(90deg, #ff4f9f 0%, #c2185b 100%);
      color:#fff;
      border-radius: 16px;
      padding: 12px 12px;
      text-align:center;
      margin: 8px 0 6px;
      box-shadow: 0 10px 25px rgba(194,24,91,.18);
    }
    .priceBox .da{
      font-size: 28px;
      font-weight: 900;
      line-height: 1.1;
      letter-spacing:.3px;
    }
    .priceBox .meaning{
      margin-top: 6px;
      font-size: 16px;   /* "ÙŠØ¹Ù†ÙŠ" ÙƒØ¨ÙŠØ±Ø© ÙˆÙˆØ§Ø¶Ø­Ø© */
      font-weight: 800;
      opacity: .98;
    }

    .thankTop{
      text-align:center;
      margin: 6px 0 2px;
      color: var(--deep);
      font-weight: 800;
      font-size: 15px;
    }

    /* ÙØ§ØªÙˆØ±Ø© */
    .invoice{
      margin-top: 10px;
      border-radius: 18px;
      overflow:hidden;
      border: 1px solid rgba(244,179,207,.75);
      background: var(--card);
    }

    .invoiceTitle{
      background: #ffd2e6;
      color:#333;
      font-weight: 900;
      text-align:center;
      padding: 10px 10px;
      font-size: 18px;
      border-bottom: 1px dashed rgba(194,24,91,.25);
    }

    .invoiceInner{
      padding: 10px 12px 12px;
    }

    .invoiceHeader{
      display:flex;
      justify-content:space-between;
      gap: 8px;
      font-size: 12px;
      color:#666;
      margin-bottom: 8px;
      font-weight: 700;
    }
    .invoiceHeader span{
      background:#fff;
      border: 1px solid rgba(244,179,207,.75);
      border-radius: 12px;
      padding: 4px 8px;
      white-space: nowrap;
    }

    .rows{
      width:100%;
      border-collapse: collapse;
      font-size: 14px;
    }
    .rows td{
      padding: 8px 0;
      border-bottom: 1px solid rgba(244,179,207,.5);
      vertical-align: middle;
    }
    .rows td.key{
      color:#666;
      font-weight: 800;
      width: 52%;
    }
    .rows td.val{
      color:#111;
      font-weight: 900;
      text-align: left; /* Ø¨Ø§Ù„Ù‚Ù„Ø¨ ÙŠØ¨Ø§Ù† Ù…Ù„ÙŠØ­ */
      direction:ltr;
    }
    .rows td.val.ar{
      direction:rtl;
      text-align:right;
    }

    .stamp{
      text-align:center;
      font-size:11px;
      color:#c2185b;
      border:1px dashed rgba(244,179,207,.95);
      border-radius:12px;
      padding:5px 8px;
      width: fit-content;
      margin: 8px auto 6px;
      font-weight: 900;
    }

    .thanksNick{
      text-align:center;
      font-weight: 900;
      color: var(--deep);
      font-size: 18px;
      margin-top: 4px;
    }

    .instruction{
      text-align:center;
      margin-top: 6px;
      color:#7b1b45;
      font-weight: 800;
      line-height: 1.35;
      font-size: 14px;
      padding: 0 6px;
    }

    .btns{
      display:grid;
      grid-template-columns: 1.4fr 1fr;
      gap: 10px;
      margin-top: 10px;
      padding: 10px 12px 12px;
      background: #fff7fb;
      border-top: 1px solid rgba(244,179,207,.55);
    }
    button{
      border:0;
      border-radius: 16px;
      padding: 12px 10px;
      font-size: 15px;
      font-weight: 900;
      cursor:pointer;
    }
    .download{
      background: linear-gradient(90deg, var(--pink) 0%, var(--deep) 100%);
      color:#fff;
      box-shadow: 0 10px 20px rgba(194,24,91,.16);
    }
    .reset{
      background:#fff;
      border: 2px solid rgba(244,179,207,.95);
      color:#7b1b45;
    }

    /* Ù†Ø®Ù„ÙŠ Ø§Ù„ØµÙØ­Ø© â€œÙ‚Ø¯Ø§Ù…Ùƒâ€ Ù‚Ø¯Ø± Ø§Ù„Ø¥Ù…ÙƒØ§Ù† */
    .compactNote{
      text-align:center;
      margin-top: 8px;
      color:#b01957;
      font-weight: 800;
      font-size: 13px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="hero">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ ÙÙŠ <span style="opacity:.98">she.store_dz</span></div>

    <div class="card">
      <div class="grid2">
        <div>
          <label for="productCount">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬</label>
          <input id="productCount" type="number" min="1" value="1" inputmode="numeric" />
        </div>
        <div>
          <label for="pieceCount">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹</label>
          <input id="pieceCount" type="number" min="1" value="1" inputmode="numeric" />
        </div>
      </div>

      <div class="one">
        <label for="usdTotal">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± ($)</label>
        <input id="usdTotal" type="number" min="0" step="0.01" inputmode="decimal" />
      </div>

      <div class="priceBox" aria-live="polite">
        <div class="da"><span id="daTotal">0</span> Ø¯Ø¬</div>
        <div class="meaning">ÙŠØ¹Ù†ÙŠ: <span id="meaningText">0</span></div>
      </div>

      <div class="thankTop">Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ ÙŠØ§ Ø³ÙƒØ±Ø© Ù„Ø²ÙŠØ§Ø±ØªÙƒ ğŸ’—</div>
    </div>

    <div class="invoice" id="invoiceBox">
      <div class="invoiceTitle">ÙØ§ØªÙˆØ±ØªÙƒ</div>
      <div class="invoiceInner">
        <div class="invoiceHeader">
          <span id="invoiceNumber">ÙØ§ØªÙˆØ±Ø© Ø±Ù‚Ù…: â€”</span>
          <span id="invoiceDate">â€”</span>
        </div>

        <!-- Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
        <div class="one">
          <label for="fullName">Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨ (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ)</label>
          <input id="fullName" type="text" autocomplete="name" />
        </div>

        <div class="one">
          <label for="address">Ø§Ù„Ø³ÙƒÙ† (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ)</label>
          <input id="address" type="text" autocomplete="street-address" />
        </div>

        <div class="one">
          <label for="phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ)</label>
          <input id="phone" type="tel" inputmode="tel" autocomplete="tel" />
        </div>

        <!-- Ù…Ù„Ø®Øµ Ø§Ù„ÙØ§ØªÙˆØ±Ø© (Ù†ÙØ³ Ø§Ù„ÙØ§ØªÙˆØ±Ø©ØŒ Ù…Ø§ÙƒØ§Ù†Ø´ Ø²ÙˆØ¬) -->
        <table class="rows" role="presentation" aria-hidden="false">
          <tr>
            <td class="key">Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨</td>
            <td class="val ar" id="invName">-</td>
          </tr>
          <tr>
            <td class="key">Ø§Ù„Ø³ÙƒÙ†</td>
            <td class="val ar" id="invAddress">-</td>
          </tr>
          <tr>
            <td class="key">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</td>
            <td class="val" id="invPhone">-</td>
          </tr>
          <tr>
            <td class="key">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</td>
            <td class="val" id="invProducts">1</td>
          </tr>
          <tr>
            <td class="key">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</td>
            <td class="val" id="invTotal">0 Ø¯Ø¬</td>
          </tr>
        </table>

        <div class="stamp">she.store_dz âœ”</div>

        <div class="thanksNick" id="thanksNick">ğŸ’—</div>
        <div class="instruction">
          Ø¹Ù†Ø¯ Ù…ÙˆØ§ÙÙ‚ØªÙƒ Ù„Ù„Ø´Ø±Ø§Ø¡ Ø§Ø±Ø³Ù„ÙŠ Ø±Ø§Ø¨Ø· Ø³Ù„Ø© Ù…Ø¹ ØµÙˆØ±Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙÙŠ Ø§Ù„Ø®Ø§Øµ âœ…ğŸ“±
        </div>
      </div>

      <div class="btns">
        <button class="download" id="downloadBtn">ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© (ØµÙˆØ±Ø©)</button>
        <button class="reset" id="resetBtn">Ù…Ø³Ø­</button>
      </div>
    </div>

    <div class="compactNote">ğŸ’—</div>
  </div>

<script>
  // Ø«ÙˆØ§Ø¨Øª Ø§Ù„Ø­Ø³Ø§Ø¨ (Ù…Ø®ÙÙŠÙŠÙ† Ø¹Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…)
  const USD_TO_DZD = 270;
  const PROFIT_PER_PRODUCT = 250;
  const PACKAGING = 50;

  // Ø¹Ù†Ø§ØµØ±
  const productCount = document.getElementById("productCount");
  const pieceCount   = document.getElementById("pieceCount");
  const usdTotal     = document.getElementById("usdTotal");

  const daTotal      = document.getElementById("daTotal");
  const meaningText  = document.getElementById("meaningText");

  const fullName     = document.getElementById("fullName");
  const address      = document.getElementById("address");
  const phone        = document.getElementById("phone");

  const invName      = document.getElementById("invName");
  const invAddress   = document.getElementById("invAddress");
  const invPhone     = document.getElementById("invPhone");
  const invProducts  = document.getElementById("invProducts");
  const invTotal     = document.getElementById("invTotal");

  const invoiceNumber = document.getElementById("invoiceNumber");
  const invoiceDate   = document.getElementById("invoiceDate");
  const thanksNick    = document.getElementById("thanksNick");

  const downloadBtn  = document.getElementById("downloadBtn");
  const resetBtn     = document.getElementById("resetBtn");
  const invoiceBox   = document.getElementById("invoiceBox");

  // Ø¯Ù„Ø¹ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ (Ø§Ù„Ù„ÙŠ ÙƒØªØ¨ØªÙŠÙ‡Ù…)
  const nickMap = {
    "Ø±Ø­Ø§Ø¨":"Ø±Ø­ÙˆØ¨Ø©",
    "ÙØ±Ø­":"ÙØ±ÙØ±",
    "Ø³Ù†Ø¯Ø³":"Ø³ÙˆØ³Ùˆ",
    "Ø§Ù…Ø§Ù„":"Ø§Ù…ÙˆÙ„Ø©",
    "Ø£Ù…Ø§Ù„":"Ø§Ù…ÙˆÙ„Ø©",
    "Ù‡Ù†Ø§Ø¯ÙŠ":"Ù‡Ù†ÙˆØ¯Ø©",
    "Ø§ÙŠØ©":"Ø§ÙŠÙˆØªØ©",
    "Ø¢ÙŠØ©":"Ø§ÙŠÙˆØªØ©",
    "Ø®Ù„ÙŠØµØ©":"Ø®Ù„ÙˆØµØ©",
    "ØªÙ‚ÙˆÙ‰":"ØªÙ‚Ùˆ",
    "Ø§ÙƒØ±Ø§Ù…":"ÙƒØ±ÙˆÙ…",
    "Ø¥ÙƒØ±Ø§Ù…":"ÙƒØ±ÙˆÙ…",
    "Ø¶Ø­Ù‰":"Ø¶Ø­Ùˆ",
    "Ø±Ø­Ù…Ø©":"Ø±Ø­ÙˆÙ…Ø©",
    "Ø´ÙŠÙ…Ø§Ø¡":"Ø´ÙŠÙ…Ùˆ",
    "Ø§Ø´ÙˆØ§Ù‚":"Ø´ÙˆØ´Ùˆ",
    "Ø£Ø´ÙˆØ§Ù‚":"Ø´ÙˆØ´Ùˆ",
    "Ø¯Ø¹Ø§Ø¡":"Ø¯Ø¹Ø¯Ø¹",
    "Ø¨Ø³Ù…Ù„Ø©":"Ø¨Ø³ÙˆÙ…Ø©",
    "Ø³Ù„Ù…Ù‰":"Ø³Ù„Ù…ÙˆØ´",
    "Ù„Ø¨Ù†Ù‰":"Ù„Ø¨Ù†Ø§ØªÙŠ",
    "Ø§Ø³Ø±Ø§Ø¡":"Ø§ÙŠØ³Ø±ÙŠ",
    "Ø¥Ø³Ø±Ø§Ø¡":"Ø§ÙŠØ³Ø±ÙŠ",
    "Ø¨ØªÙˆÙ„":"Ø¨ØªÙˆÙ„ÙŠ",
    "Ø±ÙˆÙ…ÙŠØ³Ø©":"Ø±ÙˆÙ…ÙŠ",
    "Ø§ÙŠÙ…Ø§Ù†":"Ø§Ù…ÙˆÙ†Ø©",
    "Ø¥ÙŠÙ…Ø§Ù†":"Ø§Ù…ÙˆÙ†Ø©",
    "Ø­Ù†ÙŠÙ†":"Ø­Ù†ÙˆÙ†",
    "Ø±ÙˆÙŠØ¯Ø©":"Ø±ÙˆØ±Ùˆ",
    "Ù‡Ø¯ÙŠÙ„":"Ù‡Ø¯ÙˆÙ„Ø©",
    "ÙƒÙ†Ø¯Ø©":"ÙƒÙ†Ø¯ÙˆØ´",
    "Ø§Ø±ÙŠØ¬":"Ø¬ÙˆØ¬Ø§",
    "Ø£Ø±ÙŠØ¬":"Ø¬ÙˆØ¬Ø§",
    "Ø§Ù…ÙŠÙ†Ø©":"Ø§Ù…ÙŠÙ†Ùˆ",
    "Ø£Ù…ÙŠÙ†Ø©":"Ø§Ù…ÙŠÙ†Ùˆ",
    "ØµÙˆÙ†ÙŠØ§":"ØµÙ†ØµÙ†",
    "Ø³Ø¹Ø§Ø¯":"Ø³ÙˆØ³Ùˆ",
    "Ù…Ø±ÙˆÙ‰":"Ù…ÙŠÙ…ÙŠ",
    "Ù…Ø±ÙŠÙ…":"Ù…Ø±ÙŠÙˆÙ…Ø©",
    "Ø¬Ù‡Ø§Ø¯":"Ø¬Ù‡ÙˆØ¯Ø©",
    "Ù†Ø³Ø±ÙŠÙ†":"Ù†Ø³Ø±ÙŠÙ†Ø©",
    "Ù†Ø¯Ù‰":"Ù†Ø¯ÙˆØ´",
    "Ù…Ù†Ø©":"Ù…Ù†ÙˆØ´",
    "ÙØªÙŠØ­Ø©":"ÙØªÙˆØ­",
    "Ø§Ø³ÙŠÙ„":"Ø§Ø³ÙˆÙ„Ø©",
    "Ø£Ø³ÙŠÙ„":"Ø§Ø³ÙˆÙ„Ø©",
    "ÙˆØ±Ø¯Ø©":"ÙˆØ±Ø¯ÙˆØ´",
    "ÙˆØ¦Ø§Ù…":"ÙˆØ¦ÙˆÙ…",
    "ÙˆØµØ§Ù„":"ÙˆØµÙˆÙ„",
    "Ø§ÙŠÙ†Ø§Ø³":"Ø§Ù†ÙˆØ³Ø©",
    "Ø¥ÙŠÙ†Ø§Ø³":"Ø§Ù†ÙˆØ³Ø©",
    "Ù…Ø±Ø§Ù…":"Ù…Ø±ÙˆØ´"
    "Ø¹ÙˆØ§Ø·Ù":"Ø¹Ø·ÙˆÙØªÙŠ"
  };

  // Ø¥Ø°Ø§ Ù…Ø§ÙƒØ§Ù†Ø´ Ø§Ø³Ù… ÙÙŠ Ø§Ù„Ù…Ø§Ø¨: Ø£ÙˆÙ„ Ø­Ø±ÙÙŠÙ† + "ÙˆØ´"
  function makeFallbackNick(name){
    const cleaned = (name || "").trim();
    if(!cleaned) return "";
    const first = cleaned.split(/\s+/)[0]; // Ø£ÙˆÙ„ ÙƒÙ„Ù…Ø©
    const two = first.slice(0,2);
    return two ? (two + "ÙˆØ´") : "";
  }

  function getNickFromFullName(value){
    const v = (value || "").trim();
    if(!v) return "";
    const first = v.split(/\s+/)[0];
    if(nickMap[first]) return nickMap[first];
    return makeFallbackNick(first);
  }

  // Ø¨Ø¯ÙˆÙ† ÙÙˆØ§ØµÙ„/Ù†Ù‚Ø§Ø·
  function noSeparators(n){
    n = Math.trunc(Number(n) || 0);
    return String(n);
  }

  // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¯Ø¬ Ø¥Ù„Ù‰ Ù†Øµ "Ù…Ù„ÙŠÙˆÙ† Ùˆ50 Ø£Ù„Ù" (Ø¨Ø§Ù„ÙÙ’Ø±Ø§Ù†Ùƒ) Ø­Ø³Ø¨ Ø·Ù„Ø¨Ùƒ:
  // 1000Ø¯Ø¬ = 100 Ø£Ù„Ù / 10000Ø¯Ø¬ = Ù…Ù„ÙŠÙˆÙ† / 20000Ø¯Ø¬ = Ø²ÙˆØ¬ Ù…Ù„Ø§ÙŠÙ†
  function dzdToFrancsText(dzd){
    const da = Math.max(0, Math.trunc(Number(dzd) || 0));
    const francs = da * 100;

    const MILLION = 1000000;
    const THOUSAND = 1000;

    const millions = Math.floor(francs / MILLION);
    let rem = francs % MILLION;
    const thousands = Math.floor(rem / THOUSAND); // "Ø£Ù„Ù" (Ø¨Ø§Ù„ÙØ±Ù†Ùƒ)

    function millionWord(m){
      if(m === 0) return "";
      if(m === 1) return "Ù…Ù„ÙŠÙˆÙ†";
      if(m === 2) return "Ø²ÙˆØ¬ Ù…Ù„Ø§ÙŠÙ†";
      // 3+ : "3 Ù…Ù„Ø§ÙŠÙ†"
      return m + " Ù…Ù„Ø§ÙŠÙ†";
    }

    function thousandWord(t){
      if(t === 0) return "";
      if(t === 1) return "Ø£Ù„Ù";
      if(t === 2) return "Ø£Ù„ÙÙŠÙ†";
      return t + " Ø£Ù„Ù";
    }

    if(millions > 0 && thousands > 0){
      return millionWord(millions) + " Ùˆ" + thousandWord(thousands);
    }
    if(millions > 0){
      return millionWord(millions);
    }
    if(thousands > 0){
      return thousandWord(thousands);
    }
    return "0";
  }

  function calcTotalDZD(){
    const products = Math.max(1, Math.trunc(Number(productCount.value) || 1));
    productCount.value = products;

    const usd = Math.max(0, Number(usdTotal.value) || 0);

    // Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ (Ù…Ø®ÙÙŠ): ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± + Ø±Ø¨Ø­/Ù…Ù†ØªØ¬ + ØªØºÙ„ÙŠÙ Ù…Ø±Ø© ÙˆØ­Ø¯Ø©
    const dzd = Math.round(usd * USD_TO_DZD + (products * PROFIT_PER_PRODUCT) + PACKAGING);

    return dzd;
  }

  function generateInvoiceMeta(){
    const now = new Date();
    const date = now.toLocaleDateString("ar-DZ");
    const time = now.toLocaleTimeString("ar-DZ",{hour:'2-digit', minute:'2-digit'});

    invoiceDate.textContent = date + " â€¢ " + time;

    const randomNum = Math.floor(1000 + Math.random()*9000);
    invoiceNumber.textContent = "ÙØ§ØªÙˆØ±Ø© Ø±Ù‚Ù…: SH-" + randomNum;
  }

  function render(){
    const dzd = calcTotalDZD();

    // Ø¹Ø±Ø¶ Ø§Ù„Ø¯Ø¬ Ø¨Ø¯ÙˆÙ† ÙÙˆØ§ØµÙ„
    daTotal.textContent = noSeparators(dzd);

    // "ÙŠØ¹Ù†ÙŠ" Ø¨Ø§Ù„Ù†Øµ Ø§Ù„Ù„ÙŠ ØªØ­Ø¨ÙŠÙ‡
    meaningText.textContent = dzdToFrancsText(dzd);

    // Ø§Ù„ÙØ§ØªÙˆØ±Ø©
    invProducts.textContent = productCount.value;
    invTotal.textContent = noSeparators(dzd) + " Ø¯Ø¬";

    const nameV = (fullName.value || "").trim();
    const addrV = (address.value || "").trim();
    const phoneV = (phone.value || "").trim();

    invName.textContent = nameV ? nameV : "-";
    invAddress.textContent = addrV ? addrV : "-";
    invPhone.textContent = phoneV ? phoneV : "-";

    // Ø¯Ù„Ø¹
    const nick = getNickFromFullName(nameV);
    if(nick){
      thanksNick.textContent = "Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ " + nick + " ğŸ’—";
    }else{
      thanksNick.textContent = "ğŸ’—";
    }
  }

  // ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙƒØµÙˆØ±Ø© (Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙÙ‚Ø·)
  async function downloadInvoice(){
    // Ù†Ø®Ø¨ÙŠ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù‚Ø¨Ù„ Ø§Ù„ØªØµÙˆÙŠØ±
    const btns = invoiceBox.querySelector(".btns");
    btns.style.display = "none";

    // Ù†Ø®Ù„ÙŠÙ‡Ø§ ÙˆØ§Ø¶Ø­Ø©
    const canvas = await html2canvas(invoiceBox, {
      backgroundColor: null,
      scale: 2,
      useCORS: true
    });

    btns.style.display = "";

    const link = document.createElement("a");
    link.download = "ÙØ§ØªÙˆØ±Ø©_she.store_dz.png";
    link.href = canvas.toDataURL("image/png");
    link.click();
  }

  function resetAll(){
    productCount.value = 1;
    pieceCount.value = 1;
    usdTotal.value = "";

    fullName.value = "";
    address.value = "";
    phone.value = "";

    generateInvoiceMeta();
    render();
  }

  // Events
  ["input","change"].forEach(evt=>{
    productCount.addEventListener(evt, render);
    pieceCount.addEventListener(evt, render); // Ù„Ù„ØªØ°ÙƒÙŠØ± ÙÙ‚Ø· (Ù…Ø§ ÙŠØ¯Ø®Ù„Ø´ ÙÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨)
    usdTotal.addEventListener(evt, render);

    fullName.addEventListener(evt, render);
    address.addEventListener(evt, render);
    phone.addEventListener(evt, render);
  });

  downloadBtn.addEventListener("click", downloadInvoice);
  resetBtn.addEventListener("click", resetAll);

  // ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ Ù…Ø±Ø©
  generateInvoiceMeta();
  render();
</script>
</body>
  </html>
